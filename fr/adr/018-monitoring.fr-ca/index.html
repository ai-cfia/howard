
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.47">
    
    
      
        <title>ADR-018 : Gestion de l'observabilité - Howard</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adr-018-gestion-de-lobservabilite" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../.." title="Howard" class="md-header__button md-logo" aria-label="Howard" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Howard
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ADR-018 : Gestion de l'observabilité
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sélectionner la langue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/howard/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/howard/fr/" hreflang="fr" class="md-select__link">
              French
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ai-cfia/howard" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ai-cfia/howard
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Howard" class="md-nav__button md-logo" aria-label="Howard" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Howard
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ai-cfia/howard" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ai-cfia/howard
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accueil
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ADR
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration / Implémentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Github workflow
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#resume-executif" class="md-nav__link">
    <span class="md-ellipsis">
      Résumé exécutif
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contexte" class="md-nav__link">
    <span class="md-ellipsis">
      Contexte
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision" class="md-nav__link">
    <span class="md-ellipsis">
      Décision
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Décision">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#source-de-donnees-opentelemetry" class="md-nav__link">
    <span class="md-ellipsis">
      Source de données : OpenTelemetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Source de données : OpenTelemetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternatives-considerees-pour-la-source-de-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      Alternatives considérées pour la source de données
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plateforme-de-donnees-grafana-alloy-loki-tempo-prometheus" class="md-nav__link">
    <span class="md-ellipsis">
      Plateforme de données : Grafana Alloy, Loki, Tempo, Prometheus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plateforme de données : Grafana Alloy, Loki, Tempo, Prometheus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternatives-considerees-pour-la-plateforme-de-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      Alternatives considérées pour la plateforme de données
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consommation-grafana" class="md-nav__link">
    <span class="md-ellipsis">
      Consommation : Grafana
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consommation : Grafana">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternatives-considerees-pour-la-consommation" class="md-nav__link">
    <span class="md-ellipsis">
      Alternatives Considérées pour la Consommation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      Références
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="adr-018-gestion-de-lobservabilite">ADR-018 : Gestion de l'observabilité</h1>
<h2 id="resume-executif">Résumé exécutif</h2>
<p>Nous avons décidé de mettre en place une pile d'observabilité complète pour nos
applications hébergées sur Azure Kubernetes Service (AKS) en utilisant
OpenTelemetry, Grafana Alloy et divers composants Grafana (Loki, Tempo,
Prometheus). Cette décision vise à améliorer notre visibilité sur les
performances du système, à améliorer la surveillance des services critiques et à
fournir une solution open-source, indépendante du fournisseur, qui répond aux
exigences de notre agence.</p>
<p><img alt="monitoring-stack" src="../../img/monitoring-stack.png" /></p>
<h2 id="contexte">Contexte</h2>
<p>À l'Agence canadienne d'inspection des aliments, nous avons rencontré des défis
significatifs dans la surveillance et la compréhension des performances de nos
applications et services système sur Azure Kubernetes Service (AKS). Malgré une
haute disponibilité et une automatisation avec AKS, nous manquions de données
contextualisées pour diagnostiquer les problèmes et surveiller la santé de nos
nœuds et services tels qu'ArgoCD et NGINX Ingress, ainsi que nos applications
clientes.</p>
<p>Nous cherchions une solution qui offrirait une surveillance centralisée et
open-source, fournissant des informations sur l'activité, le traffic et
l'engagement avec nos applications. Notre objectif était de mettre en œuvre une
solution générique, indépendante du fournisseur, pour la collecte et l'affichage
des données de télémétrie (logs, traces et métriques) sur nos applications.
Après avoir évalué diverses options, nous avons choisi OpenTelemetry pour la
collecte de données, Grafana Alloy comme collecteur, et la suite d'outils
Grafana (Loki, Tempo, Prometheus) pour la gestion des logs, traces et métriques.</p>
<h2 id="decision">Décision</h2>
<h3 id="source-de-donnees-opentelemetry">Source de données : OpenTelemetry</h3>
<p>Nous avons choisi OpenTelemetry comme principale source de données pour la
collecte de télémétrie en raison de sa nature indépendante du fournisseur et de
ses API/SDK cohérents à travers plusieurs langages de programmation. Ce choix
s'aligne bien avec le paysage technologique diversifié de notre agence et assure
une large compatibilité et évolutivité.</p>
<h4 id="alternatives-considerees-pour-la-source-de-donnees">Alternatives considérées pour la source de données</h4>
<ol>
<li><strong>Jaeger :</strong></li>
<li><strong>Avantages :</strong> Excellentes capacités de traçage, intégration avec divers
     systèmes de stockage backend.</li>
<li>
<p><strong>Inconvénients :</strong> Principalement axé sur le traçage, moins de support
     pour les métriques et les logs comparé à OpenTelemetry.</p>
</li>
<li>
<p><strong>Zipkin :</strong></p>
</li>
<li><strong>Avantages :</strong> Simple et facile à déployer, bon support de traçage.</li>
<li><strong>Inconvénients :</strong> Support limité pour les métriques et les logs, moins
     flexible qu'OpenTelemetry.</li>
</ol>
<h3 id="plateforme-de-donnees-grafana-alloy-loki-tempo-prometheus">Plateforme de données : Grafana Alloy, Loki, Tempo, Prometheus</h3>
<p>Nous avons décidé d'utiliser Grafana Alloy comme notre collecteur OpenTelemetry,
tirant parti de sa position neutre vis-à-vis des fournisseurs et de son
intégration transparente avec les autres composants Grafana. L'attrait principal
de Grafana Alloy réside dans sa promesse de fournir une plateforme
d'observabilité unifiée, semblable à une clé maîtresse pour diverses serrures.
Cela permet une intégration transparente avec des outils tels que Prometheus
pour les métriques, Loki pour les journaux, et bien d'autres. Alloy simplifie la
pile d'observabilité, la rendant plus accessible et gérable.</p>
<p>Pour les sources de données, nous avons sélectionné Grafana Loki pour les
journaux, Grafana Tempo pour les traces, et Prometheus pour les métriques.</p>
<ol>
<li>
<p><strong>Alloy :</strong></p>
<ul>
<li><strong>Avantages :</strong> Plateforme d'observabilité unifiée, neutre vis-à-vis des
  fournisseurs, intégration transparente avec les autres composants Grafana.</li>
<li><strong>Inconvénients :</strong> Complexité de la configuration et de la gestion des
  solutions de stockage de journaux à grande échelle.</li>
</ul>
</li>
<li>
<p><strong>Loki :</strong></p>
<ul>
<li><strong>Avantages :</strong> Agrégation de journaux hautement efficace, stockage
  évolutif, et intégration avec Grafana pour une visualisation transparente.</li>
<li><strong>Inconvénients :</strong> Complexité de la configuration et de la gestion des
  solutions de stockage de journaux à grande échelle.</li>
</ul>
</li>
<li>
<p><strong>Tempo :</strong></p>
<ul>
<li><strong>Avantages :</strong> Tracing distribué efficace et évolutif, s'intègre bien
  avec les tableaux de bord Grafana.</li>
<li><strong>Inconvénients :</strong> Peut être gourmand en ressources, nécessite une
  configuration appropriée pour des performances optimales.</li>
</ul>
</li>
<li>
<p><strong>Prometheus :</strong></p>
<ul>
<li><strong>Avantages :</strong> Capacités robustes de collecte et de requête de métriques,
  support solide de l'écosystème, et gestion des alertes.</li>
<li><strong>Inconvénients :</strong> Peut être gourmand en ressources, en particulier à
  grande échelle, et nécessite une configuration et une maintenance
  significatives.</li>
</ul>
</li>
</ol>
<h4 id="alternatives-considerees-pour-la-plateforme-de-donnees">Alternatives considérées pour la plateforme de données</h4>
<ol>
<li>
<p><strong>Collecteur OpenTelemetry natif :</strong></p>
<ul>
<li><strong>Avantages :</strong><ul>
<li><strong>Intégration directe :</strong> Support direct pour les protocoles
  OpenTelemetry assurant une collecte et une exportation de données sans
  couture.</li>
<li><strong>Hautement personnalisable :</strong> Offre de vastes options de
  personnalisation pour adapter le pipeline d'observabilité à des
  besoins spécifiques.</li>
</ul>
</li>
<li><strong>Inconvénients :</strong><ul>
<li><strong>Configuration complexe :</strong> Nécessite un effort significatif de
  configuration et de mise en place, ce qui peut être chronophage.</li>
<li><strong>Absence de tableaux de Bbord intégrés :</strong> Ne propose pas d'outils de
  visualisation intégrés, nécessitant des intégrations supplémentaires
  pour les tableaux de bord.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Azure Monitor :</strong></p>
</li>
<li><strong>Avantages :</strong><ul>
<li><strong>Intégration native avec Azure :</strong> Intégration transparente avec les
   services et ressources Azure, simplifiant la configuration et la gestion.</li>
<li><strong>Surveillance complète :</strong> Offre une large gamme de fonctionnalités de
   surveillance et d'observabilité, y compris les journaux, les métriques et
   les traces.</li>
</ul>
</li>
<li>
<p><strong>Inconvénients :</strong></p>
<ul>
<li><strong>Dépendance au fournisseur :</strong> Lié à l'écosystème Azure, limitant la
   flexibilité et la portabilité.</li>
<li><strong>Coûteux à grande échelle :</strong> Les coûts peuvent augmenter rapidement,
   surtout avec de grands volumes de données.</li>
<li><strong>Limitations de configuration :</strong> Capacité limitée à configurer en tant
   que code, ce qui peut entraver l'automatisation et les efforts de
   contrôle de version.</li>
<li><strong>Support communautaire limité :</strong> Communauté relativement restreinte par
   rapport aux solutions open-source, ce qui peut limiter les ressources et
   le support.</li>
</ul>
</li>
<li>
<p><strong>ClickHouse :</strong></p>
<ul>
<li><strong>Avantages :</strong><ul>
<li><strong>Haute performance :</strong> Performance exceptionnelle dans la gestion de
  grands volumes de données, adapté aux analyses intensives.</li>
<li><strong>Évolutif :</strong> S'adapte efficacement pour gérer des besoins croissants
  en données sans dégradation significative des performances.</li>
</ul>
</li>
<li><strong>Inconvénients :</strong><ul>
<li><strong>Configuration complexe :</strong> Nécessite un processus de configuration
  et de mise en place complexe, rendant son adoption difficile pour les
  petites équipes.</li>
<li><strong>Besoin d'outils supplémentaires :</strong> Nécessite des outils
  supplémentaires pour la visualisation et l'intégration, augmentant la
  complexité globale de la pile.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Elasticsearch :</strong></p>
<ul>
<li><strong>Avantages :</strong><ul>
<li><strong>Capacités de recherche puissantes :</strong> Offre des capacités de
  recherche et d'analyse robustes, idéal pour la gestion des logs.</li>
<li><strong>Large adoption :</strong> Largement adopté avec une grande communauté,
  offrant de nombreuses ressources et un support étendu.</li>
</ul>
</li>
<li><strong>Inconvénients :</strong><ul>
<li><strong>Intensif en ressources :</strong> Peut être gourmand en ressources,
  nécessitant une infrastructure substantielle pour fonctionner
  efficacement.</li>
<li><strong>Coûteux à grande échelle :</strong> Les coûts peuvent augmenter rapidement,
  en particulier lorsque l'on traite de grands volumes de données.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="consommation-grafana">Consommation : Grafana</h3>
<p>Pour la visualisation des données et la création de tableaux de bord, nous avons
choisi Grafana en raison de son support robuste pour diverses sources de
données, de sa communauté étendue et de ses capacités puissantes de création de
tableaux de bord. Grafana nous permet de créer des tableaux de bord
personnalisés pour surveiller divers aspects de notre système, y compris
l'activité des applications, le trafic et les métriques de performance.</p>
<h4 id="alternatives-considerees-pour-la-consommation">Alternatives Considérées pour la Consommation</h4>
<ol>
<li><strong>Kibana :</strong></li>
<li><strong>Avantages :</strong> Excellent pour visualiser les données stockées dans
     Elasticsearch, capacités de recherche et d'analyse puissantes.</li>
<li>
<p><strong>Inconvénients :</strong> Principalement lié à l'écosystème Elasticsearch, moins
     flexible avec d'autres sources de données.</p>
</li>
<li>
<p><strong>Azure Log Analytics :</strong></p>
</li>
<li><strong>Avantages :</strong> Intégration native avec les services Azure, capacités de
     surveillance complètes.</li>
<li>
<p><strong>Inconvénients :</strong> Dépendance au fournisseur, support limité pour les
     sources de données non-Azure.</p>
</li>
<li>
<p><strong>DataDog :</strong></p>
</li>
<li><strong>Avantages :</strong> Plateforme de surveillance et d'observabilité complète,
     intégrations solides.</li>
<li>
<p><strong>Inconvénients :</strong> Propriétaire, peut être coûteux, moins flexible pour
     les intégrations open-source.</p>
</li>
<li>
<p><strong>Prometheus UI :</strong></p>
</li>
<li><strong>Avantages :</strong> Support natif pour les métriques Prometheus, simple à
     utiliser.</li>
<li><strong>Inconvénients :</strong> Capacités de visualisation limitées comparées à
     Grafana, principalement axé sur les métriques.</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>La mise en œuvre d'OpenTelemetry pour la collecte de données, de Grafana Alloy
pour le traitement des données et de Grafana pour la visualisation fournit une
pile d'observabilité entièrement open-source et indépendante du fournisseur.
Cette approche améliore notre capacité à surveiller et à dépanner efficacement
nos applications et services. Les solutions choisies offrent évolutivité,
flexibilité et support communautaire robuste, garantissant que nous pouvons
répondre à nos besoins d'observabilité actuels et futurs. De plus, OpenTelemetry
est une norme largement adoptée sur le marché, permettant à nos développeurs de
travailler avec des normes industrielles. Étant donné que nous sommes aux
premiers stades de développement de nos prototypes, c'est une opportunité idéale
pour fournir une instrumentation par conception et assurer la visibilité sur les
performances dès le départ. Cette approche proactive nous aidera à optimiser les
performances et la fiabilité de nos applications dès les premières étapes du
développement.</p>
<h2 id="references">Références</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/opentelemetry-enable?tabs=python#why-is-microsoft-azure-monitor-investing-in-opentelemetry">Microsoft Azure Monitor et
  OpenTelemetry</a></li>
<li><a href="https://grafana.com/oss/alloy-opentelemetry-collector/">Grafana Alloy</a></li>
<li><a href="https://grafana.com/oss/loki/">Grafana Loki</a></li>
<li><a href="https://grafana.com/oss/tempo/">Grafana Tempo</a></li>
<li><a href="https://prometheus.io/">Prometheus</a></li>
<li><a href="https://opentelemetry.io/docs/">Documentation OpenTelemetry</a></li>
<li><a href="https://www.jaegertracing.io/">Jaeger</a></li>
<li><a href="https://zipkin.io/">Zipkin</a></li>
<li><a href="https://clickhouse.tech/">ClickHouse</a></li>
<li><a href="https://www.elastic.co/elasticsearch/">Elasticsearch</a></li>
<li><a href="https://www.elastic.co/kibana/">Kibana</a></li>
<li><a href="https://docs.datadoghq.com/">Documentation DataDog</a></li>
<li><a href="https://prometheus.io/docs/visualization/browser/">Prometheus UI</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "header.autohide"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>